@model CheckoutErpBillingAddressModel

<div class="checkout-data">
    @await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.OpCheckoutBillingAddressTop, additionalData = Model })
    @if (Model.ShipToSameAddressAllowed)
    {
        @*<div class="section ship-to-same-address">
            <p class="selector">
                <input asp-for="ShipToSameAddress" />
                <label asp-for="ShipToSameAddress">@T("Checkout.ShipToSameAddress")</label>
            </p>
        </div>*@
    }
    <div class="section select-billing-address" style="display:none">
        <label for="billing-address-select">@T("Checkout.SelectBillingAddressOrEnterNewOne")</label>
        <div>
            <select name="billing_address_id" id="billing-address-select" class="address-select"
                    title="" onchange="Billing.resetBillingForm();Billing.newAddress(!this.value)">
                @*@foreach (var address in Model.B2BShipToAddresses)
                {
                    var addressLine = "";
                    addressLine += address.ShipToName;
                    addressLine += ", " + address.ShipToCode;
                    addressLine += ", " + address.Address1;
                    addressLine += ", " + address.City;
                    addressLine += ", " + address.StateProvinceName;
                    addressLine += " " + address.ZipPostalCode;
                    addressLine += ", " + address.CountryName;
                    //how should we render "FormattedCustomAddressAttributes" here?
                    <option value="@(address.Id)">@(addressLine)</option>
                }*@
                <option value="" selected="@(true)">@T("Checkout.NewAddress")</option>
            </select>
        </div>
    </div>
    @await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.OpCheckoutBillingAddressMiddle, additionalData = Model })
    <div class="section new-billing-address" id="billing-new-address-form">
        <div class="enter-address">
            <div asp-validation-summary="ModelOnly" class="message-error"></div>
            @{
                var dataDictAddress = new ViewDataDictionary(ViewData);
                dataDictAddress.TemplateInfo.HtmlFieldPrefix = "ErpBillingAddress";
                @await Html.PartialAsync("~/Plugins/NopStation.Plugin.B2B.B2BB2CFeatures/Views/ErpCheckout/_CreateOrUpdateErpBillingAddresses.cshtml", Model.ErpBillingAddress, dataDictAddress)
            }
        </div>
    </div>
    @await Component.InvokeAsync(typeof(WidgetViewComponent), new { widgetZone = PublicWidgetZones.OpCheckoutBillingAddressBottom, additionalData = Model })
</div>
